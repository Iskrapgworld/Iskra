
}

  </script>
</body>
</html>
<!DOCTYPE html><html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>PG v1.4 — ИСКРА: Битва</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #111;
      color: white;
      font-family: sans-serif;
      text-align: center;
    }
    h1 { color: #ffa500; }
    #menu, #characterScreen, #battleScreen, #endScreen {
      display: none;
    }
    #topBar {
      display: flex;
      justify-content: space-between;
      padding: 5px;
      font-size: 14px;
    }
    #board {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 4px;
      width: 360px;
      margin: 20px auto;
    }
    .cell {
      width: 58px;
      height: 58px;
      border-radius: 50%;
    }
    .red    { background: #f00; }
    .green  { background: #0f0; }
    .blue   { background: #00f; }
    .purple { background: #a0f; }
    .orange { background: #fa0; }
    button {
      padding: 10px 20px;
      margin: 5px;
      background: #444;
      color: white;
      border: none;
      border-radius: 5px;
    }
    #timerBarContainer {
      width: 100%; height: 10px; background: #333;
    }
    #timerBar {
      height: 10px; background: lime; width: 100%; transition: width 1s linear;
    }
  </style>
</head>
<body>
  <!-- ... интерфейс остался без изменений ... -->
  <script>
    let exp = 1000, skillPoints = 0;
    let stats = { str: 1, dex: 1, vit: 1, int: 1, luck: 1 };function updateCharacterScreen() {
  document.getElementById('exp').textContent = exp;
  document.getElementById('skillPoints').textContent = skillPoints;
  for (let key in stats) document.getElementById(key).textContent = stats[key];
}
function inc(stat) {
  if (skillPoints > 0) {
    stats[stat]++;
    skillPoints--;
    updateCharacterScreen();
  }
}
function enterMenu() {
  document.getElementById('overlay').style.display = 'none';
  document.getElementById('endScreen').style.display = 'none';
  document.getElementById('battleScreen').style.display = 'none';
  document.getElementById('characterScreen').style.display = 'none';
  document.getElementById('menu').style.display = 'block';
}
function showCharacter() {
  document.getElementById('menu').style.display = 'none';
  document.getElementById('characterScreen').style.display = 'block';
  updateCharacterScreen();
}
function backToMenu() {
  document.getElementById('characterScreen').style.display = 'none';
  document.getElementById('menu').style.display = 'block';
}

function startGame() {
  document.getElementById('menu').style.display = 'none';
  document.getElementById('battleScreen').style.display = 'block';
  initBattle();
}

let hp = 200, shield = 100, mana = 0;
let enemyHp = 100, enemyShield = 100, enemyMana = 0;
let timer;

function initBattle() {
  hp = 200;
  shield = 100;
  mana = 0;
  enemyHp = 100;
  enemyShield = 100;
  enemyMana = 0;
  document.getElementById('hp').textContent = hp;
  document.getElementById('shield').textContent = shield;
  document.getElementById('mana').textContent = mana;
  document.getElementById('enemyHp').textContent = enemyHp;
  document.getElementById('enemyShield').textContent = enemyShield;
  document.getElementById('enemyMana').textContent = enemyMana;
  document.getElementById('battleLog').textContent = "Комбо появится здесь...";
  document.getElementById('lightningButton').style.display = 'none';
  startTurn();
}

function startTurn() {
  let time = 20;
  const bar = document.getElementById('timerBar');
  bar.style.width = '100%';
  clearInterval(timer);
  timer = setInterval(() => {
    time--;
    bar.style.width = (time * 5) + '%';
    if (time <= 0) clearInterval(timer);
  }, 1000);
}

function useLightning() {
  if (mana >= 20) {
    mana -= 20;
    document.getElementById('mana').textContent = mana;
    document.getElementById('battleLog').textContent = "⚡ Урон от молнии: 50";
    enemyHp -= 50;
    document.getElementById('enemyHp').textContent = enemyHp;
    exp += mana; // начисляем опыт в виде оставшейся маны
    checkLevelUp();
  }
}

function checkLevelUp() {
  while (exp >= 100) {
    exp -= 100;
    skillPoints += 5;
  }
}

  </script>
</body>
</html>
