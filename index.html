<!DOCTYPE html><html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ò–°–ö–†–ê: –ë–∏—Ç–≤–∞</title>
  <style>
    body {
      margin: 0;
      background-color: #111;
      color: #fff;
      font-family: sans-serif;
      text-align: center;
    }
    h1 {
      color: #ffa500;
      margin: 10px 0;
    }
    #topBar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 5px 10px;
      font-size: 14px;
    }
    #timerBarContainer {
      flex-grow: 1;
      height: 10px;
      margin: 0 10px;
      background: #444;
      border-radius: 5px;
      overflow: hidden;
    }
    #timerBar {
      height: 100%;
      width: 100%;
      background: linear-gradient(90deg, #33ff33, #ffff00);
      transition: width 1s linear;
    }
    #battleLog {
      margin: 5px;
      padding: 4px;
      font-size: 14px;
      min-height: 30px;
    }
    #board {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 4px;
      width: 360px;
      margin: 30px auto 10px auto;
      transition: opacity 0.3s ease;
    }
    .cell {
      width: 58px;
      height: 58px;
      border-radius: 50%;
      transition: transform 0.3s ease, opacity 1s ease;
    }
    .red    { background: radial-gradient(circle, #ff4d4d, #990000); }
    .green  { background: radial-gradient(circle, #66ff66, #006600); }
    .blue   { background: radial-gradient(circle, #66ccff, #003366); }
    .purple { background: radial-gradient(circle, #dca0ff, #440066); }
    .orange { background: radial-gradient(circle, #cc9955, #cc6600); }
    .highlight { box-shadow: 0 0 10px 4px #ffffff88; }
    .fade { opacity: 0; }
    .enemy-turn #board {
      pointer-events: none;
      opacity: 0.2;
    }
    #overlay, #endScreen {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.85);
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      z-index: 999;
    }
    #overlay input {
      padding: 10px;
      font-size: 16px;
      border-radius: 5px;
      border: none;
      margin-top: 10px;
    }
    button {
      padding: 10px 20px;
      margin-top: 10px;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      background: #6622cc;
      color: white;
    }
    .stat-panel {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #222;
      padding: 10px;
      border-radius: 10px;
      display: none;
    }
    .stat-panel.visible {
      display: block;
    }
    .stat-panel h3 {
      margin-top: 0;
    }
    .stat-panel button {
      background: #444;
      margin: 3px;
      padding: 4px 8px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <h1>üî• –ò–°–ö–†–ê: –ë–∏—Ç–≤–∞ üî•</h1>
  <div id="topBar">
    <div>–í—ã:<br>‚ù§Ô∏è <span id="hp">200</span><br>üõ° <span id="shield">100</span><br>üîÆ <span id="mana">0</span></div>
    <div id="timerBarContainer"><div id="timerBar"></div></div>
    <div>–ú–æ–Ω—Å—Ç—Ä:<br>üíÄ <span id="enemyHp">100</span><br>üõ° <span id="enemyShield">100</span><br>üîÆ <span id="enemyMana">0</span></div>
  </div>
  <div id="battleLog">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–∏—Ç–≤—É!</div>
  <div id="board"></div>
  <button id="lightningBtn" onclick="useLightning()" style="display:none;">‚ö° –ú–æ–ª–Ω–∏—è (20 –º–∞–Ω—ã)</button>
  <div id="overlay">
    <h2>–í–≤–µ–¥–∏—Ç–µ –∏–º—è:</h2>
    <input id="nickname" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞">
    <button onclick="startGame()">–í –±–æ–π!</button>
  </div>
  <div id="endScreen" style="display:none;">
    <h2 id="endMessage">–ü–æ–±–µ–¥–∞!</h2>
    <button onclick="openStats()">–ü–æ–≤—ã—Å–∏—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</button>
  </div>
  <div class="stat-panel" id="statsPanel">
    <h3>–ü—Ä–æ–∫–∞—á–∫–∞</h3>
    <div>–û—á–∫–∏: <span id="statPoints">5</span></div>
    <div>–°–∏–ª–∞: <span id="str">1</span> <button onclick="upgradeStat('str')">+</button></div>
    <div>–õ–æ–≤–∫–æ—Å—Ç—å: <span id="agi">1</span> <button onclick="upgradeStat('agi')">+</button></div>
    <div>–ñ–∏–≤—É—á–µ—Å—Ç—å: <span id="vit">1</span> <button onclick="upgradeStat('vit')">+</button></div>
    <div>–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç: <span id="int">1</span> <button onclick="upgradeStat('int')">+</button></div>
    <div>–£–¥–∞—á–∞: <span id="luck">1</span> <button onclick="upgradeStat('luck')">+</button></div>
    <button onclick="closeStats()">–ì–æ—Ç–æ–≤–æ</button>
  </div>
<script>
// –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∫–æ–¥–∞ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤–æ –≤—Ç–æ—Ä–æ–π —á–∞—Å—Ç–∏
</script>
</body>
</html>
<script>
function showLevelUpScreen() {
  document.getElementById("levelUpScreen").style.display = "flex";
  document.getElementById("statPoints").textContent = statPoints;
  updateStatDisplay();
}

function hideLevelUpScreen() {
  document.getElementById("levelUpScreen").style.display = "none";
}

function updateStatDisplay() {
  document.getElementById("strength").textContent = stats.strength;
  document.getElementById("agility").textContent = stats.agility;
  document.getElementById("vitality").textContent = stats.vitality;
  document.getElementById("intelligence").textContent = stats.intelligence;
  document.getElementById("luck").textContent = stats.luck;
}

function increaseStat(stat) {
  if (statPoints > 0) {
    stats[stat]++;
    statPoints--;
    updateStatDisplay();
    document.getElementById("statPoints").textContent = statPoints;
  }
}

function getDamageModifier() {
  return 1 + stats.strength / 100;
}

function getShieldModifier() {
  return 1 + stats.agility / 100;
}

function getHealModifier() {
  return 1 + stats.vitality / 100;
}

function getCritModifier() {
  return stats.luck;
}

function getSuperModifier() {
  return 1 + stats.intelligence / 100;
}

function resetLevelProgression() {
  level = 1;
  currentXP = 0;
  nextLevelXP = 50;
  statPoints = 0;
  stats = {
    strength: 1,
    agility: 1,
    vitality: 1,
    intelligence: 1,
    luck: 1
  };
}

function gainXP(amount) {
  currentXP += amount;
  if (currentXP >= nextLevelXP) {
    level++;
    currentXP -= nextLevelXP;
    nextLevelXP = nextLevelXP * 2;
    statPoints += 5;
    showLevelUpScreen();
  }
}
</script>

<!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ–∫–∞—á–∫–∏ -->
<div id="levelUpScreen" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000d; color:white; z-index:1000; justify-content:center; align-items:center; flex-direction:column;">
  <h2>–ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è!</h2>
  <p>–û—á–∫–æ–≤ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫: <span id="statPoints">0</span></p>
  <div>
    <button onclick="increaseStat('strength')">–°–∏–ª–∞: <span id="strength">1</span></button><br>
    <button onclick="increaseStat('agility')">–õ–æ–≤–∫–æ—Å—Ç—å: <span id="agility">1</span></button><br>
    <button onclick="increaseStat('vitality')">–ñ–∏–≤—É—á–µ—Å—Ç—å: <span id="vitality">1</span></button><br>
    <button onclick="increaseStat('intelligence')">–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç: <span id="intelligence">1</span></button><br>
    <button onclick="increaseStat('luck')">–£–¥–∞—á–∞: <span id="luck">1</span></button><br>
  </div>
  <button onclick="hideLevelUpScreen()">OK</button>
</div>
