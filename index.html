<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ò–°–ö–†–ê: –ë–∏—Ç–≤–∞ TG-–º–∏–Ω–∏</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: sans-serif;
      margin: 0;
      text-align: center;
    }
    h1 { color: #ffa500; margin: 16px 0 8px 0; }
    .nicknameForm {
      background: #231135;
      margin: 32px auto 0 auto;
      padding: 32px 16px 24px 16px;
      border-radius: 28px;
      max-width: 360px;
      box-shadow: 0 0 32px #000a;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .nicknameForm input {
      padding: 12px;
      font-size: 18px;
      border-radius: 7px;
      border: none;
      margin: 18px 0 18px 0;
      width: 230px;
      text-align: center;
      background: #fff;
      color: #111;
    }
    .nicknameForm button {
      background: #7b2ff2;
      color: #fff;
      font-weight: bold;
      padding: 13px 40px;
      border: none;
      border-radius: 11px;
      font-size: 20px;
      cursor: pointer;
    }
    #mainMenu, #characterMenu, #endScreen {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.94);
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }
    #topBar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 7px 12px;
      font-size: 15px;
    }
    #timerBarContainer {
      flex-grow: 1;
      height: 12px;
      margin: 0 10px;
      background: #444;
      border-radius: 5px;
      overflow: hidden;
    }
    #timerBar {
      height: 100%;
      width: 100%;
      background: linear-gradient(90deg, #33ff33, #ffff00);
      transition: width 1s linear;
    }
    #battleLog {
      margin: 8px;
      padding: 5px;
      font-size: 15px;
      min-height: 30px;
    }
    #board {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 4px;
      width: 360px;
      margin: 30px auto 10px auto;
      transition: opacity 0.3s ease;
    }
    .cell {
      width: 58px;
      height: 58px;
      border-radius: 50%;
      transition: transform 0.3s ease, opacity 1s ease;
    }
    .red    { background: radial-gradient(circle, #ff4d4d, #990000); }
    .green  { background: radial-gradient(circle, #66ff66, #006600); }
    .blue   { background: radial-gradient(circle, #66ccff, #003366); }
    .purple { background: radial-gradient(circle, #dca0ff, #440066); }
    .orange { background: radial-gradient(circle, #cc9955, #cc6600); }
    .highlight { box-shadow: 0 0 10px 4px #ffffff88; }
    .fade { opacity: 0.18; }
    .enemy-turn #board { pointer-events: none; opacity: 0.2; }
    button, .nicknameForm button {
      margin-top: 10px;
      font-size: 17px;
      border: none;
      border-radius: 10px;
      background: #6622cc;
      color: white;
      cursor: pointer;
    }
    #lightningButton {
      margin: 12px auto;
      display: none;
      background: #ffcc00;
      color: #000;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>üî• –ò–°–ö–†–ê: –ë–∏—Ç–≤–∞ TG-–º–∏–Ω–∏ üî•</h1>
  <div id="nicknameBlock" class="nicknameForm">
    <h2 style="margin-bottom:0;">–í–≤–µ–¥–∏—Ç–µ –∏–º—è:</h2>
    <input id="nickname" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞" maxlength="16" autocomplete="off">
    <button id="nextBtn">–î–∞–ª–µ–µ</button>
  </div>

  <div id="topBar" style="margin-top:16px;">
    <div>–í—ã:<br>‚ù§Ô∏è <span id="hp">200</span><br>üõ° <span id="shield">100</span><br>üîÆ <span id="mana">0</span></div>
    <div id="timerBarContainer"><div id="timerBar"></div></div>
    <div>–ú–æ–Ω—Å—Ç—Ä:<br>üíÄ <span id="enemyHp">100</span><br>üõ° <span id="enemyShield">100</span><br>üîÆ <span id="enemyMana">0</span></div>
  </div>
  <div id="battleLog">–ö–æ–º–±–æ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...</div>
  <div id="board"></div>
  <button id="lightningButton" onclick="useLightning()">‚ö° –ú–æ–ª–Ω–∏—è (20 –º–∞–Ω—ã)</button>

  <div id="mainMenu">
    <h2>–ú–µ–Ω—é</h2>
    <button onclick="startGame()">–í –±–æ–π!</button>
    <button onclick="showCharacterMenu()">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</button>
  </div>
  <div id="characterMenu">
    <h2>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</h2>
    <div>–û–ø—ã—Ç: <span id="xp">0</span> | –û—á–∫–∏ –Ω–∞–≤—ã–∫–æ–≤: <span id="skillPoints">0</span></div>
    <div>–°–∏–ª–∞: <span id="str">1</span> <button onclick="upgrade('str')">+</button></div>
    <div>–õ–æ–≤–∫–æ—Å—Ç—å: <span id="agi">1</span> <button onclick="upgrade('agi')">+</button></div>
    <div>–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç: <span id="int">1</span> <button onclick="upgrade('int')">+</button></div>
    <div>–ñ–∏–≤—É—á–µ—Å—Ç—å: <span id="vit">1</span> <button onclick="upgrade('vit')">+</button></div>
    <div>–£–¥–∞—á–∞: <span id="luck">1</span> <button onclick="upgrade('luck')">+</button></div>
    <button onclick="backToMenu()">–ù–∞–∑–∞–¥</button>
  </div>
  <div id="endScreen">
    <h2 id="endMessage">–ü–æ–±–µ–¥–∞!</h2>
    <button onclick="showMainMenu()">–í –º–µ–Ω—é</button>
  </div>
  <script>
// ---- –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–∫–∞–∫ —Ä–∞–Ω—å—à–µ, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
const board = document.getElementById("board");
const hpEl = document.getElementById("hp");
const shieldEl = document.getElementById("shield");
const enemyHpEl = document.getElementById("enemyHp");
const enemyShieldEl = document.getElementById("enemyShield");
const manaEl = document.getElementById("mana");
const enemyManaEl = document.getElementById("enemyMana");
const timerBar = document.getElementById("timerBar");
const endScreen = document.getElementById("endScreen");
const endMessage = document.getElementById("endMessage");
const battleLog = document.getElementById("battleLog");
const lightningBtn = document.getElementById("lightningButton");
const mainMenu = document.getElementById("mainMenu");
const charMenu = document.getElementById("characterMenu");
const xpEl = document.getElementById("xp");
const skillPointsEl = document.getElementById("skillPoints");
const attrEls = {
  str: document.getElementById("str"),
  agi: document.getElementById("agi"),
  int: document.getElementById("int"),
  vit: document.getElementById("vit"),
  luck: document.getElementById("luck")
};
const nicknameInput = document.getElementById("nickname");
const nicknameBlock = document.getElementById("nicknameBlock");
const nextBtn = document.getElementById("nextBtn");

let attributes = { str: 1, agi: 1, int: 1, vit: 1, luck: 1 };
let xp = 0, skillPoints = 0;
let mana = 0, enemyMana = 0;
let lightningUsed = false;
let grid = [], dragging = null, dragIdx = null;
let isPlayerTurn = true;
let hp = 200, shield = 100, enemyHp = 100, enemyShield = 100;
let playerName = "–ò–≥—Ä–æ–∫", turnTimer;
let comboAccumulator = {};
const colors = ['red', 'green', 'blue', 'purple', 'orange'];

// --- –ì–ª–∞–≤–Ω–æ–µ: —Ç–µ–ø–µ—Ä—å –∫–Ω–æ–ø–∫–∞ –î–∞–ª–µ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –≤ Telegram!
nextBtn.addEventListener('click', function() {
  playerName = nicknameInput.value.trim() || "–ò–≥—Ä–æ–∫";
  nicknameBlock.style.display = "none";
  mainMenu.style.display = "flex";
  endScreen.style.display = "none";
});

// –û—Å—Ç–∞–ª—å–Ω–æ–π JS-–∫–æ–¥ –±–æ–µ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã ‚Äî —Ç–∞–∫–æ–π –∂–µ –∫–∞–∫ –∏ –±—ã–ª —É —Ç–µ–±—è (—Å–º. –≤—ã—à–µ, —á—Ç–æ–±—ã –Ω–µ –∑–∞—Å–æ—Ä—è—Ç—å —á–∞—Ç)
// ...
// –°—é–¥–∞ –ø–æ–¥—Å—Ç–∞–≤—å —Ç–≤–æ–π –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π –∫–æ–¥ –±–æ—è, createGrid, findMatches, drag&drop, startTurn –∏ —Ç.–¥.

</script>
</body>
</html>
